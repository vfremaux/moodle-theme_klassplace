{"version":3,"file":"local_my_on_site.min.js","sources":["../src/local_my_on_site.js"],"sourcesContent":["// This file is part of Moodle - http://moodle.org/\n//\n// Moodle is free software: you can redistribute it and/or modify\n// it under the terms of the GNU General Public License as published by\n// the Free Software Foundation, either version 3 of the License, or\n// (at your option) any later version.\n//\n// Moodle is distributed in the hope that it will be useful,\n// but WITHOUT ANY WARRANTY; without even the implied warranty of\n// MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the\n// GNU General Public License for more details.\n//\n// You should have received a copy of the GNU General Public License\n// along with Moodle.  If not, see <http://www.gnu.org/licenses/>.\n\n/**\n * Javascript controller for controlling the sections.\n *\n * @module     local_my/local_my\n * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later\n */\n// jshint unused: false, undef:false\n/* eslint-disable no-undef no-unused-vars */\ndefine(['jquery', 'core/config', 'core/log'], function($, cfg, log) {\n\n    /**\n     * SectionControl class.\n     *\n     * @param {String} selector The selector for the page region containing the actions panel.\n     */\n    var localmy = {\n\n        usereloadwaiter: false,\n\n        init: function() {\n\n            // Attach delegated togglestate handler to all handles in page.\n            $('#page-site-index').on('click', '.local-my-cat-collapse', [], this.toggle_cat_state);\n            $('#page-site-index').on('change', '.local-my-modality-chooser', [], this.toggle_modality);\n            $('#page-site-index').on('click', '.local-my-area-ctls', [], this.global_area_ctl);\n            $('#page-site-index').on('click', '.detail-handle', [], this.toggle_detail);\n            $('#page-site-index').on('click', '.add-to-favorites-handle', [], this.add_to_favorites);\n            $('#page-site-index').on('click', '.remove-from-favorites-handle', [], this.remove_from_favorites);\n\n            $('#page-site-index').on('click', '.course-filter', [], this.refresh_course_list);\n            $('#page-site-index').on('click', '.course-sort', [], this.refresh_course_list);\n            $('#page-site-index').on('click', '.course-display', [], this.refresh_course_list);\n            $('#page-site-index').on('click', '.course-time', [], this.refresh_course_list);\n            $('#page-site-index').on('click', '.reload-areas', [], this.refresh_course_list);\n\n            if ($('.is-accordion').length !== 0) {\n                // Is in accordion\n                $('.is-accordion .local-my-course').hide();\n                $('.is-accordion .local-my-cat-collapse > h3 > a').attr('aria-expanded', 'false');\n            }\n\n            // Launch lazy loading of all area place-holders.\n            $('.reload-areas').each(function() {\n                log.debug(\"Launching refresh on \" + $(this).attr('data-widget') + '-' + $(this).attr('data-uid'));\n                $(this).trigger('click');\n            });\n            this.usereloadwaiter = true;\n\n            log.debug('AMD Local My On site Page initialized');\n\n        },\n\n        // Refreshes all handler bindings when something is reloaded.\n        postreset: function() {\n\n            if ($('.is-accordion').length !== 0) {\n                // Is in accordion\n                $('.is-accordion .local-my-course').hide();\n                $('.is-accordion .local-my-cat-collapse > h3 > a').attr('aria-expanded', 'false');\n            }\n        },\n\n        hide_home_nav: function() {\n            $('a[data-key=\"home\"]').css('display', 'none');\n        },\n\n        toggle_cat_state: function(e) {\n\n            e.stopPropagation();\n            e.preventDefault();\n            var that = $(this);\n\n            var regex = /local-my-cathandle-([^-]+)-([0-9]+)/;\n            var matchs = regex.exec(that.attr('id'));\n            if (!matchs) {\n                return;\n            }\n            var area = matchs[1];\n            var catid = parseInt(matchs[2]);\n\n            log.debug('Working for cat ' + catid + ' in area ' + area);\n\n            if (that.closest('.is-accordion').length === 0) {\n                // This is the previous close/open mode.\n                var url = cfg.wwwroot + '/local/my/ajax/stateregister.php?';\n                url += 'item=' + area;\n                url += '&catid=' + catid;\n\n                var hide = 0;\n\n                if ($('.local-my-course-' + area + '.cat-' + area + '-' + catid).first().hasClass('collapsed')) {\n                    $('.local-my-course-' + area + '.cat-' + area + '-' + catid).removeClass('collapsed');\n                    $('#local-my-cathandle-' + area + '-' + catid + ' > h3 > a').attr('aria-expanded', 'true');\n                    log.debug('Expanding ' + area + ' in area ' + catid);\n                    hide = 0;\n                } else {\n                    $('.local-my-course-' + area + '.cat-' + area + '-' + catid).addClass('collapsed');\n                    $('#local-my-cathandle-' + area + '-' + catid + ' > h3 > a').attr('aria-expanded', 'false');\n                    log.debug('Closing ' + area + ' in area ' + catid);\n                    hide = 1;\n                }\n\n                url += '&hide=' + hide;\n\n                $.get(url, function() {\n                });\n\n            } else {\n                // This is the accordion mode.\n                $('.local-my-course-' + area).slideUp(\"normal\");\n                $('.local-my-cat-collapse-' + area + ' > h3 > a').attr('aria-expanded', 'false');\n                $('.local-my-course-' + area + '.cat-' + area + '-' + catid).slideDown(\"normal\");\n                $('#local-my-cathandle-' + area + '-' + catid + ' > h3 > a').attr('aria-expanded', 'true');\n            }\n\n            return false;\n        },\n\n        /**\n         * When administrator and using static text modules based on profile fields\n         */\n        toggle_modality: function() {\n\n            var that = $(this);\n\n            var modalityid = that.attr('id').replace('local-my-static-select-', 'local-my-static-modal-');\n            $('.local-my-statictext-modals').addClass('local-my-hide');\n            $('#' + modalityid + '-' + that.val()).removeClass('local-my-hide');\n        },\n\n        toggle_detail: function(e) {\n\n            e.stopPropagation();\n            e.preventDefault();\n            var that = $(this);\n\n            var courseid = that.attr('id').replace('detail-handle-', '');\n            var panelid = '#details-indicators-' + courseid;\n            if ($(panelid).css('display') === 'none') {\n                $(panelid).css('display', 'flex');\n                that.attr('aria-expanded', true);\n                that.children('i').removeClass('fa-caret-down');\n                that.children('i').addClass('fa-caret-up');\n            } else {\n                $(panelid).css('display', 'none');\n                that.attr('aria-expanded', false);\n                that.children('i').removeClass('fa-caret-up');\n                that.children('i').addClass('fa-caret-down');\n            }\n\n            return false;\n        },\n\n        global_area_ctl: function(e) {\n\n            var that = $(this);\n            e.stopPropagation();\n            e.preventDefault();\n\n            var regexp = /local-my-cats-([^-]+)-([^-]+)$/;\n            var matches = that.attr('id').match(regexp);\n            if (!matches) {\n                return;\n            }\n\n            var mode = matches[1];\n            var area = matches[2];\n            var url = '';\n\n            if (mode == 'collapseall') {\n                $('.local-my-course-' + area).addClass('collapsed');\n                $('.local-my-cat-collapse-' + area + ' > h3 > button > img').each( function(index, element) {\n                    var handlesrc = element.src;\n                    handlesrc = handlesrc.replace('expanded', 'collapsed');\n                    element.src = handlesrc;\n                });\n                url = cfg.wwwroot + '/local/my/ajax/stateregister.php?';\n                url += 'item=' + area;\n                url += '&catids=' + $('#local-my-areacategories-' + area).html();\n                url += '&what=collapseall';\n\n                $.get(url);\n            } else {\n                $('.local-my-course-' + area).removeClass('collapsed');\n                $('.local-my-cat-collapse-' + area + ' > h3 > button > img').each( function(index, element) {\n                    var handlesrc = element.src;\n                    handlesrc = handlesrc.replace('collapsed', 'expanded');\n                    element.src = handlesrc;\n                });\n\n                url = cfg.wwwroot + '/local/my/ajax/stateregister.php?';\n                url += 'item=' + area;\n                url += '&catids=' + $('#local-my-areacategories-' + area).html();\n                url += '&what=expandall';\n\n                $.get(url);\n            }\n\n            return false;\n        },\n\n        sektor: function(args) {\n\n            if (!('color' in args)) {\n                args['color'] = '#bb3030';\n            }\n\n            if (!('circlecolor' in args)) {\n                args['circlecolor'] = '#ddd';\n            }\n\n            /* eslint-disable */\n            log.debug(\"Sektor refresh on \" + args['id']);\n            var sektor = new Sektor(args['id'], {\n              size: args['size'],\n              stroke: 0,\n              arc: false,\n              angle: args['angle'],\n              sectorColor: args['color'],\n              circleColor: args['circlecolor'],\n              fillCircle: true\n            });\n            /* eslint-enable */\n        },\n\n        add_to_favorites: function() {\n\n            var that = $(this);\n\n            var courseid = that.attr('data-course');\n            var islight = that.hasClass('light');\n\n            var url = cfg.wwwroot + '/local/my/ajax/service.php';\n            url += '?what=addtofavorites';\n            url += '&courseid=' + courseid;\n            that.removeClass('fa-star-o');\n            that.addClass('fa-star');\n            if (islight) {\n                that.removeClass('add-to-favorites-handle');\n                that.addClass('remove-from-favorites-handle');\n            }\n\n            log.debug(\"Adding course \" + courseid + \" to favorites\");\n            $.get(url);\n\n            // Find and reload favorites.\n            var favorites = $('.favorite-courses');\n            if (favorites.length) {\n                favorites.each(function() {\n                    // find the reload-areas direct child and apply reload.\n                    $(this).children('.reload-areas').trigger('click');\n                });\n            }\n        },\n\n        remove_from_favorites: function() {\n\n            var that = $(this);\n\n            var courseid = that.attr('data-course');\n            var islight = that.hasClass('light');\n\n            var url = cfg.wwwroot + '/local/my/ajax/service.php';\n            url += '?what=removefromfavorites';\n            url += '&courseid=' + courseid;\n\n            log.debug(\"Removing course \" + courseid + \" from favorites\");\n            $.get(url);\n\n            // find on screen icon-favorites of this course and change class.\n            $('.icon-favorite[data-course=\"' + courseid + '\"]').removeClass('fa-star');\n            $('.icon-favorite[data-course=\"' + courseid + '\"]').addClass('fa-star-o');\n            if (islight) {\n                that.removeClass('fa-star');\n                that.addClass('fa-star-o');\n                that.removeClass('remove-from-favorites-handle');\n                that.addClass('add-to-favorites-handle');\n            }\n\n            // Find and reload favorites.\n            var favorites = $('.favorite-courses');\n            if (favorites.length) {\n                favorites.each(function() {\n                    // find the reload-areas direct child and apply reload.\n                    $(this).children('.reload-areas').trigger('click');\n                });\n            }\n        },\n\n        /**\n         * finds widget UID in sort or filter and refresh content of the whole widget content.\n         */\n        refresh_course_list: function() {\n            var that = $(this);\n\n            // Collect filter and sort state.\n            var uid = that.attr('data-uid');\n            var view = that.attr('data-view');\n            var widget = that.attr('data-widget');\n\n            log.debug(\"Activating sort/filter/display option on \" + uid);\n\n            var filters = $('.course-filters-' + uid + '.active');\n\n            var url = cfg.wwwroot + '/local/my/ajax/service.php';\n            url += '?what=getcourses';\n            url += '&widget=' + widget;\n            url += '&uid=' + uid;\n            url += '&view=' + view;\n            if (!that.attr('data-sort')) {\n                var activesort = $('.course-sort-' + uid + '.active');\n                if (activesort) {\n                    // Add sort if exists.\n                    url += '&sort=' + activesort.attr('data-sort');\n                }\n            } else {\n                url += '&sort=' + that.attr('data-sort');\n            }\n\n            if (!that.attr('data-display')) {\n                var activedisplay = $('.course-display-' + uid + '.active');\n                if (activedisplay) {\n                    // Add display if exists.\n                    url += '&display=' + activedisplay.attr('data-display');\n                }\n            } else {\n                url += '&display=' + that.attr('data-display');\n            }\n\n            if (!that.attr('data-time')) {\n                var activetime = $('.course-time-' + uid + '.active');\n                if (activetime) {\n                    // Add time selector if exists.\n                    url += '&schedule=' + activetime.attr('data-time');\n                }\n            } else {\n                url += '&schedule=' + that.attr('data-time');\n            }\n\n            // Process if clicked item was a filter option.\n            var currentdatafilter;\n            if (that.attr('data-filter')) {\n                currentdatafilter = that.attr('data-filter');\n                url += '&' + that.attr('data-filter') + '=' + that.attr('data-filter-value');\n            }\n\n            if (filters.length) {\n                // Add all filters of the widget. Avoid contradicting a clicked filter.\n                for (var filter in filters) {\n                    if (filter.attr('data-filter') != currentdatafilter) {\n                        url += '&' + filter.attr('data-filter') + '=' + filter.attr('data-filter-value');\n                    }\n                }\n            }\n\n            if (localmy.usereloadwaiter) {\n                $('#content-' + uid).html('<img src=\"' + cfg.wwwroot + '/pix/i/loading.gif\">');\n            }\n\n            $.get(url, function(data) {\n                $('#area-courses-' + uid).html(data.html);\n                $('#block_' + widget + '-' + uid + ' .filter-states').html(data.filterstates);\n            }, 'json');\n        }\n    };\n\n    return localmy;\n\n});\n"],"names":["define","$","cfg","log","localmy","usereloadwaiter","init","on","this","toggle_cat_state","toggle_modality","global_area_ctl","toggle_detail","add_to_favorites","remove_from_favorites","refresh_course_list","length","hide","attr","each","debug","trigger","postreset","hide_home_nav","css","e","stopPropagation","preventDefault","that","matchs","exec","area","catid","parseInt","closest","url","wwwroot","first","hasClass","removeClass","addClass","get","slideUp","slideDown","modalityid","replace","val","panelid","children","matches","match","mode","index","element","handlesrc","src","html","sektor","args","Sektor","size","stroke","arc","angle","sectorColor","circleColor","fillCircle","courseid","islight","favorites","uid","view","widget","currentdatafilter","filters","activesort","activedisplay","activetime","filter","data","filterstates"],"mappings":"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"}